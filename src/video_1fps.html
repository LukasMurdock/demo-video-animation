<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body class="position: relative; width: 100%; height: 100vh;">
    <nav>
        <ul><li><a href="./img_1fps.html">img 1fps test</a></li></ul>
        <ul><li><a href="./img_2fps.html">img 2fps test</a></li></ul>
        <ul><li><a href="./video_1fps.html">video 1fps test</a></li></ul>
        <ul><li><a href="./video_12fps.html">video 12fps test</a></li></ul>
        <ul><li><a href="./video_60fps.html">video 60fps test</a></li></ul>
    </nav>

    <div style="min-width: 100%; top: 0; min-height:100%; position: sticky;">
        <video id="bigBuckBunny" src="./1fps.mp4" style="width: 100%; height:100%; object-fit: cover;"></video>
    </div>
    <!-- spacer div -->
    <div style="height: 100vh; width: 100vw; position: sticky;"></div>
    <script type="text/javascript">
        const videoEl = document.getElementById('bigBuckBunny');
        let isScrolling = false;
        const videoDurationInSeconds = 10;

        window.addEventListener('scroll', function(e) {
            // Check if the user is actively scrolling (debounce)
            if (!isScrolling) {
                isScrolling = true;

                // Use requestAnimationFrame to improve performance
                requestAnimationFrame(function() {
                    // get percentage of scroll
                    const scrollPercentage = window.pageYOffset / (document.body.scrollHeight - window.innerHeight);
                    // Set the video position that reflects the scrollbar position
                    videoEl.currentTime = scrollPercentage * videoDurationInSeconds;
                    isScrolling = false; // Reset scrolling flag
                });
            }
        })
    </script>
</body>
</html>
